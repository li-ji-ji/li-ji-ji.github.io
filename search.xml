<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Nginx搭建简单文件服务器</title>
    <url>/2021/01/11/Nginx%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<h3 id="1-Nginx安装"><a href="#1-Nginx安装" class="headerlink" title="1. Nginx安装"></a>1. Nginx安装</h3><ul>
<li>Ubuntu: <code>sudo apt-get install nginx</code>  </li>
<li>Fedora、Centos: <code>sudo yum install nginx</code>  </li>
<li>Manjaro: <code>sudo pacman -S nginx</code>  </li>
</ul>
<h3 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2. 配置文件"></a>2. 配置文件</h3><ul>
<li>查找Nginx配置文件: <code>sudo find / -name nginx.conf</code>  </li>
<li>一般存放在 /etc/nginx/nginx.conf  </li>
</ul>
<a id="more"></a>

<h3 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3. 修改配置文件"></a>3. 修改配置文件</h3><ul>
<li>在 http 节点中添加以下代码  <pre class="line-numbers language-nginx" data-language="nginx"><code class="language-nginx"><span class="token keyword">autoindex</span> on<span class="token punctuation">;</span>             <span class="token comment">#开启索引功能</span>
<span class="token keyword">autoindex_exact_size</span> off<span class="token punctuation">;</span> <span class="token comment"># 关闭计算文件确切大小（单位bytes），只显示大概大小（单位kb、mb、gb）</span>
<span class="token keyword">autoindex_localtime</span> on<span class="token punctuation">;</span>   <span class="token comment"># 显示本机时间而非 GMT 时间</span>
<span class="token keyword">charset</span> utf<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment"># 避免中文乱码</span>

<span class="token keyword">server</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">listen</span>       <span class="token number">9999</span><span class="token punctuation">;</span> <span class="token comment">#监听端口号</span>
  <span class="token keyword">server_name</span>  localhost<span class="token punctuation">;</span>
  <span class="token comment">#root         /usr/share/nginx/html;</span>
  <span class="token keyword">root</span>         <span class="token operator">/</span>home<span class="token operator">/</span>evil<span class="token operator">/</span>share<span class="token punctuation">;</span> <span class="token comment"># 共享的文件目录</span>
  <span class="token keyword">error_log</span> <span class="token operator">/</span>home<span class="token operator">/</span>evil<span class="token operator">/</span>share<span class="token operator">/</span>log<span class="token operator">/</span>error<span class="token punctuation">.</span>log <span class="token punctuation">;</span> <span class="token comment"># 报错的文件目录</span>

  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>
    <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">40</span>x<span class="token punctuation">.</span>html <span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html <span class="token punctuation">&#123;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
保存文件并重启Nginx  </li>
</ul>
<h3 id="4-效果图"><a href="#4-效果图" class="headerlink" title="4. 效果图"></a>4. 效果图</h3><ul>
<li><p><img src="https://blog-1257162717.cos.ap-shanghai.myqcloud.com/Nginx%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/img1.webp" alt="Nginx搭建简单文件服务器">  </p>
<h3 id="5-坑"><a href="#5-坑" class="headerlink" title="5. 坑"></a>5. 坑</h3></li>
<li><p>403 Forbidden<br>403 forbidden错误是禁止读取访问。也就是说服务器理解了请求，但是不允许访问  </p>
</li>
<li><p>解决方案：  </p>
<blockquote>
<p><code>cd</code> 进入文件夹，确认文件夹存在，文件夹存在即为访问权限问题  </p>
</blockquote>
<blockquote>
<p>修改文件夹访问权限 <code>chmod 755 文件夹路径</code>  </p>
</blockquote>
<blockquote>
<p>重启 nginx 后还是 <code>403</code>  </p>
</blockquote>
<blockquote>
<p>查看日志文件内容，显示：<br><code>2021/01/11 18:07:11 [error] 98226#98226: *1 &quot;/home/evil/share/index.html&quot; is forbidden (13: Permission denied), client: 127.0.0.1, server: localhost, request: &quot;GET / HTTP/1.1&quot;, host: &quot;localhost:9999&quot;</code>  </p>
</blockquote>
<blockquote>
<p>是 nginx 运行用户的问题，<code>ps -aux | grep nginx</code> 查看 nginx worker 用户<br><img src="https://blog-1257162717.cos.ap-shanghai.myqcloud.com/Nginx%E6%90%AD%E5%BB%BA%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/img2.webp" alt="Nginx搭建简单文件服务器"><br>运行用户为 http ，修改 nginx 运行用户（如果nginx配置的用户和静态文件的用户不匹配，那怕权限是777也会出现权限问题）  </p>
</blockquote>
<blockquote>
<p>在 nginx.conf 开头加入: </p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">user 用户名 用户组<span class="token punctuation">;</span> <span class="token comment"># 这里的用户名和组就是文件夹的</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</blockquote>
<h2 id="Over"><a href="#Over" class="headerlink" title="Over"></a>Over</h2></li>
</ul>
]]></content>
      <categories>
        <category>Nginx</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>JVM基础</title>
    <url>/2021/01/08/JVM%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="陈树义JVM基础15讲完结"><a href="#陈树义JVM基础15讲完结" class="headerlink" title="陈树义JVM基础15讲完结"></a>陈树义JVM基础15讲完结</h2><ul>
<li>原文地址： <a href="https://www.cnblogs.com/chanshuyi/p/jvm_serial_00_why_learn_jvm.html">陈树义JVM基础15讲</a><a id="more"></a></li>
<li>思维导图： <img src="https://blog-1257162717.cos.ap-shanghai.myqcloud.com/JVM%E5%9F%BA%E7%A1%80/img1.webp" alt="JVM基础"></li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title>关于Linux下zsh启动时需手动source ~/.zshrc的解决方案</title>
    <url>/2020/05/06/%E5%85%B3%E4%BA%8Ezsh%E5%90%AF%E5%8A%A8%E6%97%B6%E9%9C%80%E6%89%8B%E5%8A%A8source-zshrc%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<h2 id="前置知识：-etc-zsh-zprofile"><a href="#前置知识：-etc-zsh-zprofile" class="headerlink" title="前置知识：/etc/zsh/zprofile"></a>前置知识：/etc/zsh/zprofile</h2><p>这是一个全局的配置文件，在用户登录的时候加载。一般是用来在登录的时候执行一些命令。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">sudo gedit ~<span class="token operator">/</span><span class="token punctuation">.</span>zprofile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>添加脚本</p>
<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">source ~<span class="token operator">/</span><span class="token punctuation">.</span>zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="大功告成"><a href="#大功告成" class="headerlink" title="大功告成"></a>大功告成</h1><h2 id="当然，类似问题也可以这样解决"><a href="#当然，类似问题也可以这样解决" class="headerlink" title="当然，类似问题也可以这样解决"></a>当然，类似问题也可以这样解决</h2><p><a href="https://blog.csdn.net/Faiz5z/article/details/80986460">参考博客地址</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux环境下运行、关闭jar包</title>
    <url>/2020/02/12/centos7%E7%8E%AF%E5%A2%83%E4%B8%8B%E8%BF%90%E8%A1%8C%E3%80%81%E5%85%B3%E9%97%ADjar%E5%8C%85/</url>
    <content><![CDATA[<ul>
<li>启动<br>执行  <code>cd 文件夹路径</code>  命令进入jar包所在文件夹<br>后台运行jar包：<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">nohup java <span class="token operator">-</span>jar <span class="token operator">*</span>*<span class="token operator">*</span><span class="token punctuation">.</span>jar &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<code>nohub</code> 表示后台不挂断运行<br>如需将日志输出到指定文件，在&amp;前面加上&gt;***.log ，如下：<br>(使用&gt;为覆盖源文件，使用 &gt;&gt; 则为续写文件)<pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">nohup java <span class="token operator">-</span>jar <span class="token operator">*</span>*<span class="token operator">*</span><span class="token punctuation">.</span>jar ><span class="token operator">*</span>*<span class="token operator">*</span><span class="token punctuation">.</span>log &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li>关闭</li>
</ul>
<ol>
<li>方法一：<br> 执行 <code>ps -ef|grep java</code> 命令查看当前正在运行的java进程，结果如下，第二列为进程PID  <pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">root     20032     1  0 Jan01 ?        00:00:00 sudo nohup java <span class="token operator">-</span>jar myblog<span class="token punctuation">.</span>jar
root     20033 20032  0 Jan01 ?        00:55:54 java <span class="token operator">-</span>jar myblog<span class="token punctuation">.</span>jar
root     26038     1  0  2019 ?        00:00:00 sudo nohup java <span class="token operator">-</span>jar IctExam<span class="token punctuation">.</span>jar
root     26039 26038  0  2019 ?        06:51:08 java <span class="token operator">-</span>jar IctExam<span class="token punctuation">.</span>jar
root     28443  9171  0 21:47 pts<span class="token operator">/</span>3    00:00:00 grep <span class="token operator">--</span>color=auto java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>方法二：<br>执行<code>pidof java</code> 或者 <code>jps</code> 查看现有jar包进程PID<br>执行 <code>kill -9 PID</code> 结束该PID对应的进程</li>
</ol>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
</search>
